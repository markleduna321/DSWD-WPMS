import{u as N,r as c,j as a}from"./app-BxkqB-UE.js";import{u as k}from"./user-management-thunk-q2Bkm1Bi.js";const l=({message:s,className:t=""})=>s?a.jsx("p",{className:`text-red-500 text-sm ${t}`,children:s}):null;function D({selectedUser:s,onClose:t,setAlertMessage:d,setAlertType:r,setShowAlert:m}){if(!s)return null;const h=N(),[i,o]=c.useState({name:s.name,email:s.email,password:"",role_id:s.role_id,is_online:s.is_online}),[e,b]=c.useState({});c.useEffect(()=>{o({name:s.name,email:s.email,password:"",role_id:s.role_id,is_online:s.is_online})},[s]);const j=async n=>{var p,f;n.preventDefault();const{name:y,email:w,password:x,role_id:v,is_online:_}=i,g={name:y,email:w,role_id:v,is_online:_};x&&(g.password=x);try{await h(k(s.id,g)),d("User updated successfully!"),r("success"),m(!0)}catch(u){d("Failed to update user. Please try again."),r("error"),m(!0),b(((f=(p=u==null?void 0:u.response)==null?void 0:p.data)==null?void 0:f.errors)||{})}finally{setTimeout(()=>{m(!1),d(""),r("")},5e3),t()}};return a.jsx("form",{onSubmit:j,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),a.jsx("input",{type:"text",name:"name",id:"name",value:i.name,onChange:n=>o({...i,name:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-500 focus:ring-opacity-50"}),a.jsx(l,{message:e==null?void 0:e.name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),a.jsx("input",{type:"email",name:"email",id:"email",value:i.email,onChange:n=>o({...i,email:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-500 focus:ring-opacity-50"}),a.jsx(l,{message:e==null?void 0:e.email})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a.jsx("input",{type:"password",name:"password",id:"password",value:i.password,onChange:n=>o({...i,password:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-500 focus:ring-opacity-50"}),a.jsx(l,{message:e==null?void 0:e.password})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"role_id",className:"block text-sm font-medium text-gray-700",children:"Role"}),a.jsxs("select",{id:"role_id",name:"role_id",value:i.role_id,onChange:n=>o({...i,role_id:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-500 focus:ring-opacity-50",children:[a.jsx("option",{value:"1",children:"Admin"}),a.jsx("option",{value:"2",children:"User"})]}),a.jsx(l,{message:e==null?void 0:e.role_id})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md",children:"Cancel"}),a.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-md",children:"Save"})]})]})})}export{D as default};
