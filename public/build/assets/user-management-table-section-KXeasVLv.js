import{u as D,a as U,r as t,j as e}from"./app-BxkqB-UE.js";import _ from"./modal-EaVt-0RE.js";import A from"./user-edit-section-1Q5ow-5J.js";import C from"./delete-confirmation-modal-BWT_x5dE.js";import{d as O}from"./user-management-thunk-q2Bkm1Bi.js";import T from"./alert-CskQ2CXW.js";import"./transition-lwvrnmiz.js";function R(){const h=D(),{users:o}=U(s=>s.users),d=Array.isArray(o)?o:[],[f,c]=t.useState(!1),[y,n]=t.useState(!1),[g,m]=t.useState(null),[x,i]=t.useState(null),[u,r]=t.useState(""),[j,a]=t.useState(""),[N,l]=t.useState(!1),w=s=>{m(s),c(!0)},p=()=>{c(!1),m(null)},v=s=>{i(s),n(!0)},S=async()=>{if(x)try{await h(O(x.id)),r("User deleted successfully!"),a("success"),l(!0)}catch{r("Failed to delete user. Please try again."),a("error"),l(!0)}finally{n(!1),i(null),setTimeout(()=>{l(!1),r(""),a("")},5e3)}},b=()=>{n(!1),i(null)};return e.jsxs("div",{className:"mt-8 flow-root bg-white p-5 rounded-lg",children:[e.jsx("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsxs("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:[e.jsx("div",{children:N&&e.jsx(T,{type:j,message:u,onClose:()=>l(!1)})}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0",children:"Name"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Position"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Status"}),e.jsx("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-0",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:d.length>0?d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap py-5 pl-4 pr-3 text-sm sm:pl-0",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"mt-1 text-gray-500",children:s.email})]})})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-5 text-sm text-gray-500",children:e.jsx("div",{className:`text-sm font-medium px-3 py-1 rounded-lg ${s.role_id===1?"text-blue-800":s.role_id===2?"text-green-800":s.role_id===3?"text-yellow-800":"text-gray-800"}`,children:s.role_id===1?"Admin":s.role_id===2?"User":s.role_id===3?"Household":"Unknown"})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-5 text-sm text-gray-500",children:e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${s.is_online?"bg-green-50 text-green-700 ring-green-600/20":"bg-red-50 text-red-700 ring-red-600/20"}`,children:s.is_online?"Online":"Offline"})}),e.jsxs("td",{className:"relative whitespace-nowrap py-5 pl-3 pr-4 text-right text-sm font-medium sm:pr-0",children:[e.jsx("a",{href:"#",className:"text-indigo-600 hover:text-indigo-900",onClick:()=>w(s),children:"View"}),e.jsx("span",{children:" | "}),e.jsx("a",{href:"#",className:"text-red-600 hover:text-red-900",onClick:()=>v(s),children:"Delete"})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"py-5 text-center text-gray-500",children:"No users found."})})})]})]})}),e.jsx(_,{isOpen:f,onClose:p,children:e.jsx(A,{selectedUser:g,onClose:p,setAlertMessage:r,setAlertType:a,setShowAlert:l})}),e.jsx(C,{isOpen:y,onClose:b,onConfirm:S})]})}export{R as default};
