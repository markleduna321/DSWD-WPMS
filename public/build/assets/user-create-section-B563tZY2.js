import{r as u,j as s,s as N}from"./app-BxkqB-UE.js";import x from"./button-CvLnpFN8.js";import d from"./input-label-component-BbuYs4we.js";import S from"./input-select-CEixrtD-.js";import h from"./input-text-component-DTq4SU3m.js";import E from"./modal-EaVt-0RE.js";import{c as w,g as M}from"./user-management-thunk-q2Bkm1Bi.js";import{I as T}from"./InputError-CLL-UrId.js";import{F as U}from"./PlusIcon-BK2agr_j.js";import{F as k}from"./XMarkIcon-DzRMCfnD.js";function $(){const[y,f]=u.useState(!1),[n,r]=u.useState({}),[e,j]=u.useState(),C=()=>f(!0),c=()=>f(!1),o=p=>{const{name:t,value:l}=p.target;j(i=>({...i,[t]:l}))},_=async p=>{var t,l,i,b;p.preventDefault();try{const m={name:e==null?void 0:e.name,email:e==null?void 0:e.email,password:e==null?void 0:e.password,role_id:e==null?void 0:e.role_id},a=await N.dispatch(w(m));if((a==null?void 0:a.status)===200)await N.dispatch(M()),j({name:"",email:"",password:"",role_id:""}),r([]),c();else{const v=(l=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:l.errors;v?r(v):(r(["An unexpected error occurred."]),console.error("Unexpected error:",a))}}catch(m){console.error("Error saving user:",m);const a=(b=(i=m.response)==null?void 0:i.data)==null?void 0:b.errors;r(a||["An error occurred while saving the user."])}},F=[{value:"1",label:"Admin"},{value:"2",label:"User"}];return s.jsxs("div",{className:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none",children:[s.jsx(x,{type:"button",variant:"primary",size:"md",isLoading:!1,disabled:!1,icon:s.jsx(U,{className:"h-5 w-5"}),onClick:C,children:"Add User"}),s.jsxs(E,{isOpen:y,onClose:c,width:" w-1/4",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New User"}),s.jsxs("form",{onSubmit:_,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx(d,{htmlFor:"name",labelText:"Name"}),s.jsx(h,{id:"name",name:"name",type:"text",required:!0,value:(e==null?void 0:e.name)||"",onChange:o})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx(d,{htmlFor:"email",labelText:"Email"}),s.jsx(h,{id:"email",name:"email",type:"email",required:!0,value:(e==null?void 0:e.email)||"",onChange:o}),s.jsx(T,{message:n==null?void 0:n.email,className:"mt-2"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx(d,{htmlFor:"password",labelText:"Password"}),s.jsx(h,{id:"password",name:"password",type:"password",required:!0,value:(e==null?void 0:e.password)||"",onChange:o})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx(d,{htmlFor:"role_id",labelText:"Role"}),s.jsx(S,{id:"role_id",name:"role_id",options:F,required:!0,value:(e==null?void 0:e.role_id)||"",onChange:o})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(x,{type:"submit",variant:"primary",size:"md",isLoading:!1,disabled:!1,children:"Save"}),s.jsx(x,{type:"button",variant:"danger",size:"md",isLoading:!1,disabled:!1,onClick:c,children:s.jsx(k,{className:"h-5 w-5"})})]})]})]})]})}export{$ as default};
